# GEMINI.md

* 毎回忘れずに読んでから作業に取り掛かる。
* 日本語を使用。
  
* Design.md、README.md をもとにして、開発を進めてください。

## 開発プロセス

1.  **タスクの整理と管理:**
    *   開発タスクは`task.md`に洗い出し、進捗を管理してください。
    *   ある程度の粒度でGitHub Issuesに新しいIssueを作成してください。このissueをもとに開発を進めます。（例：`gh issue create -t "title" -b ` ）
    *   実装が完了したら、各タスクの実装の詳細は、該当Issueに記録してください。その後task.mdを更新してください。

2.  **ブランチ戦略:**
    *   作業を開始する前に、ローカルの`main`ブランチにリモートの`main`ブランチをプルし、最新の状態に保ってください。
    *   新しい機能や修正に着手する際は、必ず`main`ブランチから新しいフィーチャーブランチを切ってください。
    *   **ブランチ名は、関連するIssue番号を含めることを推奨します。（例: `feature/ISSUE_NUMBER-feature-name`, `bugfix/ISSUE_NUMBER-bug-description`）**
    *   作業が完了したら、簡潔なコミットメッセージを残してコミットしてください。
    *   **コミットメッセージには、関連するIssueをクローズするためのキーワードを含めてください。（例: `feat: 新機能の追加 (closes #ISSUE_NUMBER)`）**
    *   なお、作業の完了はこちらが宣言します。

3.  **コードの品質とドキュメント:**
    *   アプリに関係のあるファイルを作成または変更したら、`README.md`のファイル構造図に適宜追加・更新してください。
    *   コードは可読性を重視し、必要に応じてコメントを追加してください。

4.  **コミットとプルリクエスト:**
    *   コードの変更は、意味のある単位でコミットしてください。
    *   プルリクエストは、変更内容が明確にわかるように記述してください。

## 開発における追加の考慮事項

### 1. Pythonのモジュールインポートについて

*   **相対インポートの推奨**: `app`ディレクトリ内のモジュール（例: `app/utils/player.py`から`app/utils/constants.py`をインポートする場合）は、`from .constants import ...` のように相対インポートを使用してください。`from app.utils.constants import ...` のような絶対インポートは、実行環境によっては`ModuleNotFoundError`を引き起こす可能性があります。

### 2. データフレームの列名について

*   **列名の事前確認**: CSVファイルからPandas DataFrameを読み込む際、列名（カラム名）は厳密に一致している必要があります。`KeyError`を避けるため、`pd.read_csv()`で読み込んだ直後や、DataFrameを操作する前に`df.columns`で列名を必ず確認してください。

### 3. 依存関係の管理について

*   **uvの使用**: プロジェクトの依存関係は`pyproject.toml`で管理されており、`uv.lock`でロックされています。新しい依存関係の追加や既存の更新は、`uv add`や`uv update`コマンドを使用し、インストールは`uv sync`コマンドで行ってください。`pip install -r requirements.txt`は使用しません。

### 4. Streamlitのセッションステートの活用

*   **st.session_state**: Streamlitアプリケーションでユーザーの選択や状態をセッション間で保持する必要がある場合、`st.session_state`を活用してください。これにより、ウィジェットの再描画時に値がリセットされるのを防ぎ、アプリケーションのインタラクティブ性を高めることができます。

## その他
*   タスクが一段落したら、gemini-log内に新規ファイルとして日報を実装時の気持ちも含めて追加してください。
*   ユーザーは読まないので赤裸々に書いてください。既存のファイルは壊さないように別名をつけてください。
