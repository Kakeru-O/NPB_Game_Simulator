import streamlit as st

st.set_page_config(layout="wide")

st.title("NPB Game Simulator について")

st.header("データの取得元と加工方法")
st.write("本シミュレーターで使用している選手データは、[Baseball-Reference.com](https://www.baseball-reference.com/) や [NPB.jp 日本野球機構](https://npb.jp/) などの公開データソースから取得し、独自に加工しています。")
st.write("具体的には、各選手の打席結果（単打、二塁打、三塁打、本塁打、四死球、三振、ゴロアウト、フライアウト）の割合を算出し、シミュレーションの確率として使用しています。")
st.write("投手データは、打撃成績が非常に低い架空の選手として設定されており、DH制オフの場合に打席に立ちます。")

st.header("試合ロジックの詳細")
st.write("本シミュレーターは、以下のロジックに基づいて1打席ごとの結果をシミュレートし、試合を進行させます。")

st.subheader("打席結果のシミュレーション")
st.write("各打者の打席結果は、事前に設定された確率（単打率、二塁打率、三塁打率、本塁打率、四死球率、三振率、ゴロアウト率、フライアウト率）に基づいてランダムに決定されます。")

st.subheader("走塁ロジック")
st.write("ヒットや四死球が発生した場合、塁上のランナーは以下のルールに基づいて進塁します。")
st.markdown("- **単打**: 一塁ランナーは二塁へ、二塁ランナーは三塁へ、三塁ランナーは本塁へ進塁します。")
st.markdown("- **二塁打**: 一塁ランナーは三塁へ、二塁ランナーは本塁へ、三塁ランナーは本塁へ進塁します。")
st.markdown("- **三塁打**: 全てのランナーが本塁へ進塁します。")
st.markdown("- **本塁打**: 全てのランナーと打者が本塁へ進塁します。")
st.markdown("- **四死球**: 塁上のランナーは押し出される形で進塁します。")
st.markdown("- **追加進塁**: ランナーのスピード値とアウトカウントに応じて、追加で進塁する可能性があります。")

st.subheader("犠打・進塁打・併殺打・犠飛")
st.write("これらの特殊な打席結果もシミュレーションに組み込まれています。")
st.markdown("- **犠打**: 特定の状況（ランナーがいる、アウトカウントが少ないなど）で、打者がアウトになる代わりにランナーを進めることを試みます。成功率は設定された確率に基づきます。犠打は打席数にはカウントされますが、打数にはカウントされません。")
st.markdown("- **進塁打**: ゴロアウトのうち、ランナーが進塁する可能性のある状況で発生します。打者はアウトになりますが、ランナーは進塁します。打席数・打数にカウントされます。")
st.markdown("- **併殺打**: ゴロアウトのうち、1塁にランナーがいる状況で発生します。打者と1塁ランナーがアウトになります。打席数・打数にカウントされます。")
st.markdown("- **犠飛**: フライアウトのうち、3塁にランナーがいる状況で発生します。打者はアウトになりますが、3塁ランナーが本塁へ生還します。犠飛は打席数にはカウントされますが、打数にはカウントされません。")

st.subheader("DH制")
st.write("DH制のON/OFFを切り替えることができます。DH制がOFFの場合、投手（打撃成績は仮の値）が打席に立ちます。")

st.header("シミュレーションの目的")
st.write("本シミュレーターは、野球の試合における打順の重要性を分析し、特定のチームや年度において最も効果的な打順を探索することを目的としています。また、様々な打席結果が試合展開に与える影響を理解するための一助となることを目指しています。")
